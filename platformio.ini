; ============================================================
; USB upload (default)
; ============================================================
[env:HEXAPOD]
platform = espressif8266
board = nodemcuv2
framework = arduino

; --- Filesystem ---
board_build.filesystem = littlefs

; --- Libraries ---
lib_deps =
    adafruit/Adafruit PWM Servo Driver Library@^2.4.1
    links2004/WebSockets@^2.4.0
    bblanchon/ArduinoJson@^6.21.3
    adafruit/DHT sensor library@^1.4.6
    adafruit/Adafruit Unified Sensor@^1.1.14

; --- Serial Monitor ---
monitor_speed = 115200

; --- Build flags (production — no debug output) ---
; All logging is OFF. LOG/LOGF are no-ops. Framework stays silent.
; Switch to the nodemcuv2_debug environment to enable verbose logging.
build_flags =
    -DHEXAPOD_MODE=1

; ============================================================
; USB upload — DEBUG mode
; Enables full verbose logging:
;   • LOG/LOGF macros  → Serial + WebSocket dashboard stream
;   • CORE_DEBUG_LEVEL=3  → ESP8266 WiFi, ESP-NOW, OTA error/warn/info
;   • DEBUG_ESP_PORT=Serial → routes framework internals to Serial
; Select "nodemcuv2_debug" in the PlatformIO environment picker.
; ============================================================
[env:_HEXAPOD_DEBUG_]
extends = env:HEXAPOD
build_flags =
    -DHEXAPOD_MODE=1
    -DDEBUG_LOGGING=1
    -DDEBUG_ESP_PORT=Serial
    -DCORE_DEBUG_LEVEL=3

; ============================================================
; OTA upload  —  use when the board is already running and
; connected to its own AP (192.168.5.1).
; Select "HEXAPOD_ota" as the environment in PlatformIO.
; ============================================================
[env:HEXAPOD_ota]
extends = env:HEXAPOD

upload_protocol = espota
upload_port     = 192.168.5.1
upload_flags    = --auth=hexapod123

